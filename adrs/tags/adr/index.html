<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="alternate" type="application/rss+xml" href="/cloudfoundry/go-cf-api/adrs/rss.xml" title="go-cf-api Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cloudfoundry/go-cf-api/adrs/atom.xml" title="go-cf-api Blog Atom Feed"><title data-react-helmet="true">6 posts tagged with &quot;adr&quot; | go-cf-api</title><meta data-react-helmet="true" property="og:title" content="6 posts tagged with &quot;adr&quot; | go-cf-api"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://pages.github.com//cloudfoundry/go-cf-api/adrs/tags/adr"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_tags_posts"><link data-react-helmet="true" rel="shortcut icon" href="/cloudfoundry/go-cf-api/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pages.github.com//cloudfoundry/go-cf-api/adrs/tags/adr"><link data-react-helmet="true" rel="alternate" href="https://pages.github.com//cloudfoundry/go-cf-api/adrs/tags/adr" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pages.github.com//cloudfoundry/go-cf-api/adrs/tags/adr" hreflang="x-default"><link rel="stylesheet" href="/cloudfoundry/go-cf-api/assets/css/styles.7fb0ff1f.css">
<link rel="preload" href="/cloudfoundry/go-cf-api/assets/js/runtime~main.80fd37fb.js" as="script">
<link rel="preload" href="/cloudfoundry/go-cf-api/assets/js/main.c289bfeb.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cloudfoundry/go-cf-api/"><img src="/cloudfoundry/go-cf-api/img/logo.svg" alt="Documentation of the go-cf-api Project" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/cloudfoundry/go-cf-api/img/logo.svg" alt="Documentation of the go-cf-api Project" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">go-cf-api</b></a><a class="navbar__item navbar__link" href="/cloudfoundry/go-cf-api/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/cloudfoundry/go-cf-api/godocs/intro">GoDocs</a><a class="navbar__item navbar__link" href="/cloudfoundry/go-cf-api/api">API Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cloudfoundry/go-cf-api/adrs">Architectural Decision Records</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/cloudfoundry/go-cf-api/godocs/intro">Latest</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cloudfoundry/go-cf-api/godocs/intro">Latest</a></li><li><a class="dropdown__link" href="/cloudfoundry/go-cf-api/versions">All versions</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/cloudfoundry/go-cf-api/adrs/tags/adr" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a class="dropdown__link" href="/cloudfoundry/go-cf-api/help-us-translate">Help us translate</a></li></ul></div><a href="https://github.com/cloudfoundry/go-cf-api" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-tags-post-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">All our posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/cloudfoundry/go-cf-api/adrs/ADR - Documentation Framework">Use Docusaurus to document our project</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/cloudfoundry/go-cf-api/adrs/ADR - Prometheus Framework">Use client_golang prometheus library to expose metrics</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/cloudfoundry/go-cf-api/adrs/ADR - Traffic Splitter">Deploy haproxy to route specific endpoints/methods to the new implementation</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/cloudfoundry/go-cf-api/adrs/ADR - Logging Framework">Use Zap logging as a performant and customizable structured logging framework</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/cloudfoundry/go-cf-api/adrs/ADR - SQL Framework">Use sqlboiler together with build tags to support multiple databases</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>6 posts tagged with &quot;adr&quot;</h1><a href="/cloudfoundry/go-cf-api/adrs/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/cloudfoundry/go-cf-api/adrs/ADR - Documentation Framework">Use Docusaurus to document our project</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-03T00:00:00.000Z" itemprop="datePublished">September 3, 2021</time> Â· 2 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/FloThinksPi" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars1.githubusercontent.com/u/5863788?v=4" alt="Florian Braun"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FloThinksPi" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Florian Braun</span></a></div><small class="avatar__subtitle" itemprop="description">go-cf-api Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li>Status: proposed</li><li>Deciders: <a href="https://github.com/FloThinksPi" target="_blank" rel="noopener noreferrer">Florian Braun</a></li><li>Date: 03.09.21</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="context-and-problem-statement"></a>Context and Problem Statement<a class="hash-link" href="#context-and-problem-statement" title="Direct link to heading">#</a></h2><p>We want a documentation page in which we provide documentation from different sources:</p><ul><li>Manually written documentation</li><li>GoDoc generated documentation from go code</li><li>API Documentation from a swagger/openapi spec</li><li>ADRs are nicely presented</li></ul><p>We want to have a nice page for it as when going public with this project, a good (single)entry point for people to look into the project is essential.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decision-drivers"></a>Decision Drivers<a class="hash-link" href="#decision-drivers" title="Direct link to heading">#</a></h2><ul><li>Having the ability to have different sources of documentation, generated and manually written ones.</li><li>Being able to statically deliver the documentation (e.g. via GitHub Pages)</li><li>Nice Look</li><li>Easy to write docs in</li><li>Being able to use Continuous Delivery to serve the docs.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="considered-options"></a>Considered Options<a class="hash-link" href="#considered-options" title="Direct link to heading">#</a></h2><ul><li><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a></li><li><a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a></li><li><a href="https://www.mkdocs.org/" target="_blank" rel="noopener noreferrer">mkdocs</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decision-outcome"></a>Decision Outcome<a class="hash-link" href="#decision-outcome" title="Direct link to heading">#</a></h2><p>Chosen option: &quot;<a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a>&quot;, because it was easy to use, produces very nice results, has the most features and seems to be widely used.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="pros-and-cons-of-the-options--optional"></a>Pros and Cons of the Options <a class="hash-link" href="#pros-and-cons-of-the-options--optional" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="docusaurus"></a><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a><a class="hash-link" href="#docusaurus" title="Direct link to heading">#</a></h3><ul><li>Good, because it has a modern/nice look.</li><li>Good, because it has a plugin system which extends functions and delivers e.g. swagger/openapi support.</li><li>Good, because it is based on react and one is able to integrate own complex pages with that if one wants.</li><li>Good, because it has a build in deploy mechanism to deploy into a second branch on the same project.</li><li>Good, because it brings nice to have / advanced features for the future like versioned docs or multi-language support.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="jekyll"></a><a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a><a class="hash-link" href="#jekyll" title="Direct link to heading">#</a></h3><ul><li>Good, because it is integrated into GitHub Enterprise. They will generate the page regularly for you.</li><li>Bad, because it has few functionality. Hard to get e.g. Swagger/OpenAPI Docs to Display.</li><li>Bad, because i diskliked the themes/page design in general.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="mkdocs"></a><a href="https://www.mkdocs.org/" target="_blank" rel="noopener noreferrer">mkdocs</a><a class="hash-link" href="#mkdocs" title="Direct link to heading">#</a></h3><ul><li>Good, because it has a plugin system which extends functions and delivers e.g. swagger/openapi support.</li><li>Bad, because it doesn&#x27;t offer an implementation of collectors to register multiple metrics at the same time</li><li>Bad, because i diskliked the themes/page design in general.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/cloudfoundry/go-cf-api/adrs/tags/adr">adr</a></li></ul></div><div class="col col--3 text--right"><a aria-label="Read more about Use Docusaurus to document our project" href="/cloudfoundry/go-cf-api/adrs/ADR - Documentation Framework"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/cloudfoundry/go-cf-api/adrs/ADR - Prometheus Framework">Use client_golang prometheus library to expose metrics</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-08-20T00:00:00.000Z" itemprop="datePublished">August 20, 2021</time> Â· 2 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/iaftab-alam" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars1.githubusercontent.com/u/81828613?v=4" alt="Aftab Alam"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/iaftab-alam" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Aftab Alam</span></a></div><small class="avatar__subtitle" itemprop="description">go-cf-api Team</small></div></div></div><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/will-gant" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars1.githubusercontent.com/u/81828613?v=4" alt="Will Gant"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/will-gant" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Will Gant</span></a></div><small class="avatar__subtitle" itemprop="description">go-cf-api Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li>Status: accepted</li><li>Deciders: <a href="https://github.com/will-gant" target="_blank" rel="noopener noreferrer">Will Gant</a> and <a href="https://github.com/iaftab-alam" target="_blank" rel="noopener noreferrer">Aftab Alam</a></li><li>Date: 20.08.21</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="context-and-problem-statement"></a>Context and Problem Statement<a class="hash-link" href="#context-and-problem-statement" title="Direct link to heading">#</a></h2><p>We want our PoC to expose prometheus metrics to be consumed by a visualization dashbaord, e.g,. Grafana, and also to benchmark peformance against the exisitng Cloud Controller.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decision-drivers"></a>Decision Drivers<a class="hash-link" href="#decision-drivers" title="Direct link to heading">#</a></h2><ul><li>A metric system which can be easily extended with custom metrics to allow comparison with the performance of the existing Cloud Controller</li><li>Community support, solutions should be a broadly adapted technology.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="considered-options"></a>Considered Options<a class="hash-link" href="#considered-options" title="Direct link to heading">#</a></h2><ul><li><a href="https://github.com/prometheus/client_golang" target="_blank" rel="noopener noreferrer">client_golang</a></li><li><a href="https://github.com/VictoriaMetrics/metrics" target="_blank" rel="noopener noreferrer">VictoriaMetrics</a></li><li><a href="https://github.com/poblish/promenade" target="_blank" rel="noopener noreferrer">promenade</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decision-outcome"></a>Decision Outcome<a class="hash-link" href="#decision-outcome" title="Direct link to heading">#</a></h2><p>Chosen option: &quot;client_golang&quot;, because it the official and by far most popular library, and appears to have most features.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="pros-and-cons-of-the-options--optional"></a>Pros and Cons of the Options <a class="hash-link" href="#pros-and-cons-of-the-options--optional" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="client_golang"></a><a href="https://github.com/prometheus/client_golang" target="_blank" rel="noopener noreferrer">client_golang</a><a class="hash-link" href="#client_golang" title="Direct link to heading">#</a></h3><ul><li>Good, because it is the official library and has significant community support</li><li>Good, because it has all features we wanted and has advanced functionality, e.g,. sqlDBStats out-of-the-box, easily customizable...</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="victoriametrics"></a><a href="https://github.com/VictoriaMetrics/metrics" target="_blank" rel="noopener noreferrer">VictoriaMetrics</a><a class="hash-link" href="#victoriametrics" title="Direct link to heading">#</a></h3><ul><li>Good, because it depends on one exeternal package as compared to eight for client_golang</li><li>Bad, because it has far fewer users and maintainers than client_golang</li><li>Bad, because it is missing &quot;advanced funcationality&quot; from client_golang (their words)</li><li>Bad, because it doesn&#x27;t offer an implementation of collectors to register mulitple metrics at the same time</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="promenade"></a><a href="https://github.com/poblish/promenade" target="_blank" rel="noopener noreferrer">promenade</a><a class="hash-link" href="#promenade" title="Direct link to heading">#</a></h3><ul><li>Bad, because it has client_golang as a dependency</li><li>Bad, because it has only one author and one user</li><li>Bad, because it doesn&#x27;t offer an implementation of collectors to register mulitple metrics at the same time</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/cloudfoundry/go-cf-api/adrs/tags/adr">adr</a></li></ul></div><div class="col col--3 text--right"><a aria-label="Read more about Use client_golang prometheus library to expose metrics" href="/cloudfoundry/go-cf-api/adrs/ADR - Prometheus Framework"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/cloudfoundry/go-cf-api/adrs/ADR - Traffic Splitter">Deploy haproxy to route specific endpoints/methods to the new implementation</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-08-13T00:00:00.000Z" itemprop="datePublished">August 13, 2021</time> Â· 3 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/andy-paine" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars1.githubusercontent.com/u/14118619?v=4" alt="Andrew Paine"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/andy-paine" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Andrew Paine</span></a></div><small class="avatar__subtitle" itemprop="description">go-cf-api Team</small></div></div></div><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/svkrieger" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars1.githubusercontent.com/u/37476281?v=4" alt="Sven Krieger"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/svkrieger" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sven Krieger</span></a></div><small class="avatar__subtitle" itemprop="description">go-cf-api Team</small></div></div></div><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/philippthun" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars1.githubusercontent.com/u/618301?v=4" alt="Philipp Thun"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/philippthun" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Philipp Thun</span></a></div><small class="avatar__subtitle" itemprop="description">go-cf-api Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li>Status: accepted</li><li>Deciders: <a href="https://github.com/andy-paine" target="_blank" rel="noopener noreferrer">Andy Paine</a>, <a href="https://github.com/svkrieger" target="_blank" rel="noopener noreferrer">Sven Krieger</a>, <a href="https://github.com/philippthun" target="_blank" rel="noopener noreferrer">Philipp Thun</a></li><li>Date: 2021-08-04</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="context-and-problem-statement"></a>Context and Problem Statement<a class="hash-link" href="#context-and-problem-statement" title="Direct link to heading">#</a></h2><p>The existing Cloud Controller is the reference implementation of the CF v3 API.
This project should avoid replacing the entire <code>cloud_controller_ng</code> project in a single &quot;big bang&quot; migration.
In order to build the new implementation iteratively, this project should be deployable in parallel with the existing implementation.
It should be possible to route individual API calls to the new Cloud Controller as soon as each endpoint is complete.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decision-drivers--optional"></a>Decision Drivers <a class="hash-link" href="#decision-drivers--optional" title="Direct link to heading">#</a></h2><ul><li>Discover bugs early</li><li>Deliver value from reimplementation quickly</li><li>Minimise mean-time-to-recovery when bugs are discovered</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="considered-options"></a>Considered Options<a class="hash-link" href="#considered-options" title="Direct link to heading">#</a></h2><ol><li>Deploy new CC alongside existing CC in same instance group, using <code>nginx</code> for routing</li><li>Complete an entire endpoint at once (all HTTP methods) and use <code>gorouter</code> for path based routing</li><li>Deploy a dedicated path and HTTP method based router/proxy in front of old and new implementations and split traffic based on that</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decision-outcome"></a>Decision Outcome<a class="hash-link" href="#decision-outcome" title="Direct link to heading">#</a></h2><p>Chosen option: 3 (deploy a path and HTTP method based router/proxy in front of old and new implementations and split traffic based on that),
because it is the only option that allows for separate scaling of old and new implementations as well as routing based on HTTP method and path.
Following images shows a rough routing example with just the verry specific <code>GET /v3/buildpacks/:guid</code> endpoint beeing routed to the go implementation. Everything else will be routed to the cloudcontroller_ng.
<img src="https://user-images.githubusercontent.com/5863788/145360535-a02ebd16-e339-461e-bff5-612b3c4c8f46.png" alt="image"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="positive-consequences--optional"></a>Positive Consequences <a class="hash-link" href="#positive-consequences--optional" title="Direct link to heading">#</a></h3><ul><li>New implementation can be built in small units (endpoint + HTTP method)</li><li>Proxy can be registered only for certain routes, minimising throughput</li><li>Networking such as TLS in new implementation can be delayed until closer to completion (as proxy can perform this function)</li><li>Good support for HAProxy BOSH release as it is maintained by SAP team</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="negative-consequences--optional"></a>Negative Consequences <a class="hash-link" href="#negative-consequences--optional" title="Direct link to heading">#</a></h3><ul><li>Additional software to manage</li><li>HAProxy BOSH release is not that well suited to this use case</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="pros-and-cons-of-the-options--optional"></a>Pros and Cons of the Options <a class="hash-link" href="#pros-and-cons-of-the-options--optional" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="option-1-deploy-new-cc-alongside-existing-cc-in-same-instance-group-using-nginx-for-routing"></a>Option 1 (Deploy new CC alongside existing CC in same instance group, using <code>nginx</code> for routing)<a class="hash-link" href="#option-1-deploy-new-cc-alongside-existing-cc-in-same-instance-group-using-nginx-for-routing" title="Direct link to heading">#</a></h3><ul><li>Good, because does not change network architecture</li><li>Good, because does not add any new VMs</li><li>Bad, because cannot independently scale each implementation</li><li>Bad, because would require changes to the CAPI release to support this use case</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="option-2-complete-an-entire-endpoint-at-once-all-http-methods-and-use-gorouter-for-path-based-routing"></a>Option 2 (Complete an entire endpoint at once (all HTTP methods) and use <code>gorouter</code> for path based routing)<a class="hash-link" href="#option-2-complete-an-entire-endpoint-at-once-all-http-methods-and-use-gorouter-for-path-based-routing" title="Direct link to heading">#</a></h3><ul><li>Good, because does not change network architecture</li><li>Good, because can independently scale each implementation</li><li>Bad, because requires large amount of work to complete a whole endpoint</li><li>Bad, because requires new implementation to support TLS etc. for secure communication</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="links--optional"></a>Links <a class="hash-link" href="#links--optional" title="Direct link to heading">#</a></h2><ul><li><a href="https://github.com/cloudfoundry-incubator/haproxy-boshrelease" target="_blank" rel="noopener noreferrer">HAProxy BOSH release</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/cloudfoundry/go-cf-api/adrs/tags/adr">adr</a></li></ul></div><div class="col col--3 text--right"><a aria-label="Read more about Deploy haproxy to route specific endpoints/methods to the new implementation" href="/cloudfoundry/go-cf-api/adrs/ADR - Traffic Splitter"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/cloudfoundry/go-cf-api/adrs/ADR - Logging Framework">Use Zap logging as a performant and customizable structured logging framework</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-07-30T00:00:00.000Z" itemprop="datePublished">July 30, 2021</time> Â· 2 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/FloThinksPi" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars1.githubusercontent.com/u/5863788?v=4" alt="Florian Braun"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FloThinksPi" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Florian Braun</span></a></div><small class="avatar__subtitle" itemprop="description">go-cf-api Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li>Status: accepted</li><li>Deciders: <a href="https://github.com/FloThinksPi" target="_blank" rel="noopener noreferrer">Florian Braun</a></li><li>Date: 30.7.21</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="context-and-problem-statement"></a>Context and Problem Statement<a class="hash-link" href="#context-and-problem-statement" title="Direct link to heading">#</a></h2><p>We want our PoC to log various data in a structured way so that it is parsable by e.g. logsearch.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decision-drivers"></a>Decision Drivers<a class="hash-link" href="#decision-drivers" title="Direct link to heading">#</a></h2><ul><li>Fast logging (no wasted cpu time)</li><li>Customizable to make it compatible with the way log parsing in cloudfoundry works and maybe be able to mirror the log schema of the Cloud_Controller_NG if wanted.</li><li>Community support, solutions should be a broadly adapted technology.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="considered-options"></a>Considered Options<a class="hash-link" href="#considered-options" title="Direct link to heading">#</a></h2><ul><li><a href="https://github.com/sirupsen/logrus" target="_blank" rel="noopener noreferrer">logrus</a></li><li><a href="https://github.com/uber-go/zap" target="_blank" rel="noopener noreferrer">zap</a></li><li><a href="https://github.com/apex/log" target="_blank" rel="noopener noreferrer">apex</a></li><li><a href="https://github.com/rs/zerolog" target="_blank" rel="noopener noreferrer">zerolog</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decision-outcome"></a>Decision Outcome<a class="hash-link" href="#decision-outcome" title="Direct link to heading">#</a></h2><p>Chosen option: &quot;&quot;, because it has bradly used, very fast and has all features we want.
As we started with zap, zerolog would be an alternative but we did not think it was worth it switching over as there was no obvious benefit.
So we sticked to use zap.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="pros-and-cons-of-the-options--optional"></a>Pros and Cons of the Options <a class="hash-link" href="#pros-and-cons-of-the-options--optional" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="logrus"></a><a href="https://github.com/sirupsen/logrus" target="_blank" rel="noopener noreferrer">logrus</a><a class="hash-link" href="#logrus" title="Direct link to heading">#</a></h3><ul><li>Good, because has all features we like</li><li>Bad, because dead project, recommends alternatives</li><li>Bad, because bad performance</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="zap"></a><a href="https://github.com/uber-go/zap" target="_blank" rel="noopener noreferrer">zap</a><a class="hash-link" href="#zap" title="Direct link to heading">#</a></h3><ul><li>Good, because very good performance,</li><li>Good, because broadly used</li><li>Good, because has all features we like</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="apex"></a><a href="https://github.com/apex/log" target="_blank" rel="noopener noreferrer">apex</a><a class="hash-link" href="#apex" title="Direct link to heading">#</a></h3><ul><li>Good, because has all features we like</li><li>Bad, because I dont like the interface</li><li>Bad, because it is not used by as much people as zap</li><li>Bad, because it is as slow as logrus</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="zerolog"></a><a href="https://github.com/rs/zerolog" target="_blank" rel="noopener noreferrer">zerolog</a><a class="hash-link" href="#zerolog" title="Direct link to heading">#</a></h3><ul><li>Good, because its also very fast.</li><li>Good, because has all features we like</li><li>Good, because also broadly used but a bit less than zap</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/cloudfoundry/go-cf-api/adrs/tags/adr">adr</a></li></ul></div><div class="col col--3 text--right"><a aria-label="Read more about Use Zap logging as a performant and customizable structured logging framework" href="/cloudfoundry/go-cf-api/adrs/ADR - Logging Framework"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/cloudfoundry/go-cf-api/adrs/ADR - SQL Framework">Use sqlboiler together with build tags to support multiple databases</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-07-28T00:00:00.000Z" itemprop="datePublished">July 28, 2021</time> Â· 3 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/FloThinksPi" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars1.githubusercontent.com/u/5863788?v=4" alt="Florian Braun"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FloThinksPi" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Florian Braun</span></a></div><small class="avatar__subtitle" itemprop="description">go-cf-api Team</small></div></div></div><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/MMisoch" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars1.githubusercontent.com/u/47423110?v=4" alt="Marc Misoch"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/MMisoch" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Marc Misoch</span></a></div><small class="avatar__subtitle" itemprop="description">go-cf-api Team</small></div></div></div><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/andy-paine" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars1.githubusercontent.com/u/14118619?v=4" alt="Andrew Paine"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/andy-paine" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Andrew Paine</span></a></div><small class="avatar__subtitle" itemprop="description">go-cf-api Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li>Status: accepted</li><li>Deciders: <a href="https://github.com/FloThinksPi" target="_blank" rel="noopener noreferrer">Florian Braun</a>, <a href="https://github.com/andy-paine" target="_blank" rel="noopener noreferrer">Andy Paine</a>, <a href="https://github.com/mmisoch" target="_blank" rel="noopener noreferrer">Marc Misoch</a></li><li>Date: 2021-07-28</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="context-and-problem-statement"></a>Context and Problem Statement<a class="hash-link" href="#context-and-problem-statement" title="Direct link to heading">#</a></h2><p>The existing Cloud Controller supports both Postgres and MySQL as a storage backend and both options are used in real production deployments today.
In order to replace the existing Cloud Controller implementation, this project should also be able to support both</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decision-drivers"></a>Decision Drivers<a class="hash-link" href="#decision-drivers" title="Direct link to heading">#</a></h2><ul><li>Community support: should be able to work with any CC DB</li><li>Performance: want a minimal runtime overhead</li><li>Performance: want control over SQL queries used to be able to optimise</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="considered-options"></a>Considered Options<a class="hash-link" href="#considered-options" title="Direct link to heading">#</a></h2><ol><li><a href="https://github.com/volatiletech/sqlboiler" target="_blank" rel="noopener noreferrer">sqlboiler</a> with separate packages for Postgres and MySQL</li><li><a href="https://github.com/volatiletech/sqlboiler" target="_blank" rel="noopener noreferrer">sqlboiler</a> with an extracted interface that is implemented by both Postgres and MySQL</li><li><a href="https://github.com/volatiletech/sqlboiler" target="_blank" rel="noopener noreferrer">sqlboiler</a> in a shared package with different build tags for each implementation</li><li><a href="https://gorm.io/index.html" target="_blank" rel="noopener noreferrer">GORM</a></li><li><a href="https://github.com/xo/xo" target="_blank" rel="noopener noreferrer">xo/xo</a></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decision-outcome"></a>Decision Outcome<a class="hash-link" href="#decision-outcome" title="Direct link to heading">#</a></h2><p>Chosen option: 3 (<a href="https://github.com/volatiletech/sqlboiler" target="_blank" rel="noopener noreferrer">sqlboiler</a> in a shared package with different build tags for each implementation) because this allows all of the model code to be generated from an existing schema and lets the compiler type check that the generated implementations have the same signatures without needing to manipulate the generated code much.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="positive-consequences"></a>Positive Consequences<a class="hash-link" href="#positive-consequences" title="Direct link to heading">#</a></h3><ul><li>Model code can be regularly regenerated when CC DB schema changes (due to new migrations in existing implementation)</li><li>Smaller binaries as each only contains code relevant to that DB backend</li><li>Compile time checks that the generated code has the same function signatures for both implementations (or at least for all functions that are actually used)</li><li>Generated code can be easily extended to support optimisations</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="negative-consequences"></a>Negative Consequences<a class="hash-link" href="#negative-consequences" title="Direct link to heading">#</a></h3><ul><li>Extra tooling is required to rename and combine the files into a single package and add build tags</li><li>Directory containing generated files is extremely large</li><li>Developers need to supply build tags in order to browse, lint, compile and test code</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="pros-and-cons-of-other-options"></a>Pros and Cons of other options<a class="hash-link" href="#pros-and-cons-of-other-options" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="option-1-sqlboiler-with-separate-packages-for-postgres-and-mysql"></a>Option 1 (<a href="https://github.com/volatiletech/sqlboiler" target="_blank" rel="noopener noreferrer">sqlboiler</a> with separate packages for Postgres and MySQL)<a class="hash-link" href="#option-1-sqlboiler-with-separate-packages-for-postgres-and-mysql" title="Direct link to heading">#</a></h3><ul><li>Good, because <code>sqlboiler</code> can be run to generate the code without modification</li><li>Bad, because all controller code would need to do an <code>if</code>/<code>switch</code> statement on database type</li><li>Bad, because binaries will contain redundant code for other databases</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="option-2-sqlboiler-with-an-extracted-interface-that-is-implemented-by-both-postgres-and-mysql"></a>Option 2 (<a href="https://github.com/volatiletech/sqlboiler" target="_blank" rel="noopener noreferrer">sqlboiler</a> with an extracted interface that is implemented by both Postgres and MySQL)<a class="hash-link" href="#option-2-sqlboiler-with-an-extracted-interface-that-is-implemented-by-both-postgres-and-mysql" title="Direct link to heading">#</a></h3><ul><li>Good, because the interface could abstract between the two database</li><li>Good, because compiler would check that both generated implementations satisfy interface</li><li>Bad, because requires significant effort to extract complex <code>sqlboiler</code> interfaces</li><li>Bad, because some functions are static and cannot be extracted into an interface</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="option-4-gorm"></a>Option 4 <a href="https://gorm.io/index.html" target="_blank" rel="noopener noreferrer">GORM</a><a class="hash-link" href="#option-4-gorm" title="Direct link to heading">#</a></h3><ul><li>Good, because good documentation</li><li>Good, because controller code that interacts with database models is easy to write</li><li>Bad, because little/no support for generating models from existing schema</li><li>Bad, because has runtime overhead of using reflection</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="option-5-xoxo"></a>Option 5 <a href="https://github.com/xo/xo" target="_blank" rel="noopener noreferrer">xo/xo</a><a class="hash-link" href="#option-5-xoxo" title="Direct link to heading">#</a></h3><ul><li>Good, because generated models are extremely simple</li><li>Good, because templates are easy to customise</li><li>Bad, because generated models have no support for eager loading</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/cloudfoundry/go-cf-api/adrs/tags/adr">adr</a></li></ul></div><div class="col col--3 text--right"><a aria-label="Read more about Use sqlboiler together with build tags to support multiple databases" href="/cloudfoundry/go-cf-api/adrs/ADR - SQL Framework"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/cloudfoundry/go-cf-api/adrs/ADR - ADR Format">Use Markdown Architectural Decision Records</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-07-25T00:00:00.000Z" itemprop="datePublished">July 25, 2021</time> Â· One min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/andy-paine" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars1.githubusercontent.com/u/14118619?v=4" alt="Andrew Paine"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/andy-paine" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Andrew Paine</span></a></div><small class="avatar__subtitle" itemprop="description">go-cf-api Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li>Status: accepted</li><li>Deciders: <a href="https://github.com/andy-paine" target="_blank" rel="noopener noreferrer">Andy Paine</a></li><li>Date: 2021-07-28</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="context-and-problem-statement"></a>Context and Problem Statement<a class="hash-link" href="#context-and-problem-statement" title="Direct link to heading">#</a></h2><p>We want to record architectural decisions made in this project.
Which format and structure should these records follow?</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="considered-options"></a>Considered Options<a class="hash-link" href="#considered-options" title="Direct link to heading">#</a></h2><ul><li><a href="https://adr.github.io/madr/" target="_blank" rel="noopener noreferrer">MADR</a> 2.1.2 â€“ The Markdown Architectural Decision Records</li><li><a href="http://thinkrelevance.com/blog/2011/11/15/documenting-architecture-decisions" target="_blank" rel="noopener noreferrer">Michael Nygard&#x27;s template</a> â€“ The first incarnation of the term &quot;ADR&quot;</li><li><a href="https://www.infoq.com/articles/sustainable-architectural-design-decisions" target="_blank" rel="noopener noreferrer">Sustainable Architectural Decisions</a> â€“ The Y-Statements</li><li>Other templates listed at <a href="https://github.com/joelparkerhenderson/architecture_decision_record" target="_blank" rel="noopener noreferrer">https://github.com/joelparkerhenderson/architecture_decision_record</a></li><li>Formless â€“ No conventions for file format and structure</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decision-outcome"></a>Decision Outcome<a class="hash-link" href="#decision-outcome" title="Direct link to heading">#</a></h2><p>Chosen option: &quot;MADR 2.1.2&quot;, because</p><ul><li>Implicit assumptions should be made explicit.
Design documentation is important to enable people understanding the decisions later on.
See also <a href="https://doi.org/10.1109/TSE.1986.6312940" target="_blank" rel="noopener noreferrer">A rational design process: How and why to fake it</a>.</li><li>The MADR format is lean and fits our development style.</li><li>The MADR structure is comprehensible and facilitates usage &amp; maintenance.</li><li>The MADR project is vivid.</li><li>Version 2.1.2 is the latest one available when starting to document ADRs.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/cloudfoundry/go-cf-api/adrs/tags/adr">adr</a></li></ul></div><div class="col col--3 text--right"><a aria-label="Read more about Use Markdown Architectural Decision Records" href="/cloudfoundry/go-cf-api/adrs/ADR - ADR Format"><b>Read More</b></a></div></footer></article></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cloudfoundry/go-cf-api/api">API</a></li><li class="footer__item"><a class="footer__link-item" href="/cloudfoundry/go-cf-api/docs/intro">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/cloudfoundry/go-cf-api/godocs/intro">GoLang Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/cloudfoundry/go-cf-api/adrs">Architectural Decision Records</a></li><li class="footer__item"><a href="https://github.com/cloudfoundry/go-cf-api" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021-2021 CloudFoundry.org Foundation, Inc. All Rights Reserved.</div></div></div></footer></div>
<script src="/cloudfoundry/go-cf-api/assets/js/runtime~main.80fd37fb.js"></script>
<script src="/cloudfoundry/go-cf-api/assets/js/main.c289bfeb.js"></script>
</body>
</html>